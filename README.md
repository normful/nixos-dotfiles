# nixos-dotfiles

This repository contains:

- Nix configuration (starting in `flake.nix`) for:
    - Linux [NixOS](https://nixos.org) machines running on [Google Cloud Platform](https://cloud.google.com) (GCP)
    - macOS machines configured with [nix-darwin](https://github.com/nix-darwin/nix-darwin)
- Infrastructure as Code in [Pulumi](https://www.pulumi.com) using the [TypeScript SDK](https://www.pulumi.com/docs/iac/languages-sdks/javascript/), for provisioning the GCP virtual machines, disks, networking, etc
    - NixOS is installed on GCP machines with [nixos-anywhere](https://github.com/nix-community/nixos-anywhere) over an SSH tunnel through Google Cloud's [Identity-Aware Proxy (IAP) TCP Forwarding](https://cloud.google.com/iap/docs/using-tcp-forwarding)
- Dotfiles managed by [chezmoi](https://www.chezmoi.io)
    - Neovim configuration using [lazy.nvim](https://github.com/folke/lazy.nvim) and [NvChad](https://github.com/NvChad/NvChad)
        - `lazy.nvim` loads plugin config from `~/.config/nvim/lua/plugins/*.lua` (which is generated by `chezmoi` from `./chezmoi/dot_config/nviml/lua/plugins/*.lua`)
        - Neovim `lazy` plugin config extends any config provided by [NvChad plugin config](https://github.com/NvChad/NvChad/tree/v2.5/lua/nvchad/plugins)

# FAQs

## What are the hostnames of machines managed here?

- Currently, this repo contains config for:
    - A GCP VM named `coral` in ./gcp/coral/configuration.nix
    - A MacBook Pro named `cyan` in ./mac/cyan/configuration.nix

## Why don't you run NixOS in a VM on macOS?

I tried it already and didn't like it, Specifically, I tried running NixOS in a VM in VMWare Fusion and Parallels.

Although it worked, I realized that I prefer the simplicity of using nix-darwin on macOS. There seemed to be too many bugs and workarounds needed to make Parallels Tools or VMWare Tools properly.

## Why don't you use Home Manager?

[Home Manager](https://github.com/nix-community/home-manager) adds another layer of unnecessary complexity for me. I can't remember all of the Nix options specific to Home Manager. And althought I could, I just don't want to spend unnecessary time reading through the Nix configuration in Home Manager.
